<h1><%= t("admin.resources.edit_resource") %></h1>

<%= form_with model: @resource, url: admin_resource_path(@resource), method: :patch do |form| %>

  <div class="form-group">
    <%= form.label :title, t("admin.resources.title") %>
    <%= form.text_field :title, class: "form-control", value: @resource.title, required: true %>
  </div>

  <div class="form-group">
    <%= form.label :description, t("admin.resources.description") %>
    <%= form.text_area :description, class: "form-control", rows: 3, value: @resource.description, required: true %>
  </div>

  <div class="form-group">
    <%= form.label :status, t("admin.resources.status") %>
    <%= form.select :status, 
      [[t('admin.resources.status_active'), 'active'], 
      [t('admin.resources.status_pending'), 'pending'], 
      [t('admin.resources.status_archived'), 'archived']],
      { selected: @resource.status,
        prompt: t("admin.resources.select_status") }, 
      class: "form-control", 
      required: true %>
  </div>

  <div class="form-group">
    <%= form.label :resource_type_id, t(".resource_type") %>
    <%= form.collection_select :resource_type_id, @resource_types, :id, :title, { prompt: t("admin.resources.select_type"), selected: @resource.resource_type_id }, class: "form-control", required: true %>
  </div>

  <% if @feedback %>
    <div class="form-group" id="feedback-field" style="display: block;">
      <%= form.label :feedback, t("resources.feedback") %>
      <%= form.text_field :feedback, class: "form-control" %>
    </div>
  <% else %>
    <div class="form-group" id="feedback-field" style="display: none;">
      <%= form.label :feedback, t("resources.feedback") %>
      <%= form.text_field :feedback, class: "form-control" %>
    </div>

    <div class="form-group">
      <button type="button" id="add-feedback" class="btn btn-secondary" onclick="showFeedback()"><%=t('.add_feedback')%></button>
    </div>
  <% end %>

  <div class="form-group">
    <%= form.submit t(".save_resource"), class: "btn btn-primary" %>
  </div>
<% end %>

<%= link_to t(".back_to_resource_manager"), admin_resources_path %>

<script>
  function showFeedback() {
    document.getElementById('feedback-field').style.display = 'block';
    document.getElementById('add-feedback').style.display = 'none';
  }
</script>